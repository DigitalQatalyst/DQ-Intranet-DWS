server {
    listen 3000;
    server_name _;
    root /usr/share/nginx/html;
    index index.html;

    absolute_redirect off;
    port_in_redirect off;

    # 2. Optional: Redirect root to /dws if someone hits the bare domain
    location = /dws {
        return 301 /dws/;
    }

    # 1. Handle the specific sub-path
    location /dws {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /dws/index.html;

        # Move your existing security/logging inside or keep at server level
        add_header X-Frame-Options "SAMEORIGIN" always;
        
        # Cache control for index.html inside the sub-path
        location = /dws/index.html {
            add_header Cache-Control "no-store, no-cache, must-revalidate";
        }

        # Cache control for env-config.js inside the sub-path
        location = /dws/env-config.js {
            add_header Cache-Control "no-store, no-cache, must-revalidate";
        }

        # Static assets under /dws/assets/
        location ~* \.(css|js|jpg|jpeg|gif|png|ico|svg|woff|woff2|ttf|eot|webp)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
            access_log off;
        }
    }

    
}